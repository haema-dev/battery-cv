$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json
command: >-
  python index.py 
  --data_path ${{inputs.data}} 
  --model_path ${{inputs.model}} 
  --output_dir ${{outputs.inference_results}}
code: src/
inputs:
  data:
    type: uri_folder
    path: azureml:battery_data_256_256@latest
    mode: mount
  model:
    type: custom_model
    path: azureml:battery_fastflow_model:latest
outputs:
  inference_results:
    type: uri_folder
    path: azureml://datastores/workspaceblobstore/paths/stage2_results
    mode: rw_mount
environment: azureml:anomalib_env_v2@latest
compute: azureml:gpu-t4
display_name: Stage2_Evaluation_T4
experiment_name: Battery_S2_Inference
environment_variables:
  TRUST_REMOTE_CODE: "1"
